{% if NELC_EXTENSIONS_TRANSLATION_OVERRIDES %}
RUN pip install openedx-atlas=={{ NELC_EXTENSIONS_TRANSLATION_OVERRIDES_OPENEDX_ATLAS_VERSION }} \
    && mkdir -p {{ NELC_EXTENSIONS_TRANSLATION_OVERRIDES_LOCALE_PATH }} \
    && atlas pull --repository='{{ NELC_EXTENSIONS_TRANSLATION_OVERRIDES_ATLAS_REPOSITORY }}' --revision='{{ NELC_EXTENSIONS_TRANSLATION_OVERRIDES_ATLAS_REVISION }}' {{ NELC_EXTENSIONS_TRANSLATION_OVERRIDES_ATLAS_OPTIONS }} \
    {{ NELC_EXTENSIONS_TRANSLATION_OVERRIDES_ATLAS_LOCALE_PATH }}:{{ NELC_EXTENSIONS_TRANSLATION_OVERRIDES_LOCALE_PATH }} \
    && cd {{ NELC_EXTENSIONS_TRANSLATION_OVERRIDES_PATH }} \
    && django-admin compilemessages -v1
{% endif %}

{% if NELC_EXTENSIONS_USE_AWS_CLI %}
COPY --chown=app:app --from=python-requirements /openedx/aws-cli /openedx/aws-cli
ENV AWS_ACCESS_KEY_ID={{ NELC_EXTENSIONS_AWS_ACCESS_KEY }}
ENV AWS_SECRET_ACCESS_KEY={{ NELC_EXTENSIONS_AWS_SECRET_ACCESS_KEY }}
ENV AWS_DEFAULT_REGION={{ NELC_EXTENSIONS_AWS_DEFAULT_REGION }}
{% endif %}
